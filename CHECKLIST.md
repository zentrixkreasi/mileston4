# âœ… Checklist Project RevoBank API

## 1. Setup Project âœ…

- [x] **Buat project NestJS**: Project sudah dibuat dengan nama `revobank-api`
- [x] **Install dependency utama**:
  - [x] `@nestjs/config` âœ…
  - [x] `@nestjs/jwt` âœ…
  - [x] `@nestjs/passport` âœ…
  - [x] `passport-jwt` âœ…
  - [x] `bcryptjs` âœ…
  - [x] `prisma` (dev) âœ…
  - [x] `@prisma/client` âœ…
- [x] **File .env**: Sudah dibuat dengan:
  - [x] `DATABASE_URL` âœ…
  - [x] `JWT_SECRET` âœ…
  - [x] `JWT_EXPIRES_IN` âœ…
  - [x] `PORT` âœ…

## 2. Setup Prisma âœ…

- [x] **File `prisma/schema.prisma`**: Sudah dibuat âœ…
- [x] **Model User**: âœ…
  - id, email, password, name, role, createdAt, updatedAt
- [x] **Model Account**: âœ…
  - id, accountNumber, balance, type, userId, createdAt, updatedAt
- [x] **Model Transaction**: âœ…
  - id, type, status, amount, description, fromAccountId, toAccountId, userId, createdAt, updatedAt
- [x] **Enum UserRole**: âœ… (CUSTOMER, ADMIN)
- [x] **Enum TransactionType**: âœ… (DEPOSIT, WITHDRAW, TRANSFER)
- [x] **Enum TransactionStatus**: âœ… (PENDING, COMPLETED, FAILED)
- [x] **Generate Prisma**: `npm run prisma:generate` âœ…
- [x] **Migrate DB**: `npm run prisma:migrate` âœ…
  - Migration: `20251207134620_mileston4` âœ…
- [x] **Seed file**: `prisma/seed.ts` âœ…
  - Admin user: `admin@revobank.com` / `admin123` âœ…
  - Customer users dengan accounts dan transactions âœ…

## 3. Struktur NestJS âœ…

- [x] **Module `auth`**: âœ…
  - auth.controller.ts âœ…
  - auth.service.ts âœ…
  - auth.module.ts âœ…
  - dto/ (register.dto.ts, login.dto.ts) âœ…
  - guards/ (jwt-auth.guard.ts, roles.guard.ts) âœ…
  - strategies/ (jwt.strategy.ts) âœ…
  - decorators/ (user.decorator.ts, roles.decorator.ts) âœ…
- [x] **Module `user`**: âœ…
  - user.controller.ts âœ…
  - user.service.ts âœ…
  - user.module.ts âœ…
  - dto/ (update-profile.dto.ts) âœ…
- [x] **Module `account`**: âœ…
  - account.controller.ts âœ…
  - account.service.ts âœ…
  - account.module.ts âœ…
  - dto/ (create-account.dto.ts, update-account.dto.ts) âœ…
- [x] **Module `transaction`**: âœ…
  - transaction.controller.ts âœ…
  - transaction.service.ts âœ…
  - transaction.module.ts âœ…
  - dto/ (deposit.dto.ts, withdraw.dto.ts, transfer.dto.ts) âœ…
- [x] **Prisma Service**: `src/prisma/prisma.service.ts` âœ…
- [x] **Prisma Module**: `src/prisma/prisma.module.ts` âœ…

## 4. Fitur Authentication âœ…

- [x] **Register**: âœ…
  - Endpoint: `POST /auth/register` âœ…
  - Hash password dengan bcrypt âœ…
  - Generate JWT token âœ…
  - Validasi email unique âœ…
- [x] **Login**: âœ…
  - Endpoint: `POST /auth/login` âœ…
  - Verify password dengan bcrypt âœ…
  - Generate JWT token âœ…
  - Return user info + access_token âœ…
- [x] **JWT Strategy**: âœ…
  - File: `src/auth/strategies/jwt.strategy.ts` âœ…
  - Extract token from Bearer header âœ…
  - Validate user dari database âœ…
- [x] **Protect route dengan AuthGuard('jwt')**: âœ…
  - `JwtAuthGuard` sudah dibuat âœ…
  - Digunakan di semua protected routes âœ…
    - User routes âœ…
    - Account routes âœ…
    - Transaction routes âœ…

## 5. Fitur User âœ…

- [x] **Get Profile**: âœ…
  - Endpoint: `GET /user/profile` âœ…
  - Protected dengan JWT âœ…
  - Return user profile âœ…
- [x] **Update Profile**: âœ…
  - Endpoint: `PATCH /user/profile` âœ…
  - Protected dengan JWT âœ…
  - Validasi email unique âœ…
  - Update name dan email âœ…

## 6. Fitur Account âœ…

- [x] **Create account**: âœ…
  - Endpoint: `POST /accounts` âœ…
  - Generate unique account number (REVO + random) âœ…
  - Set initial balance âœ…
  - Link ke user yang login âœ…
- [x] **Get all accounts milik user**: âœ…
  - Endpoint: `GET /accounts` âœ…
  - User hanya lihat akun miliknya âœ…
  - Admin bisa lihat semua akun âœ…
- [x] **Get account detail**: âœ…
  - Endpoint: `GET /accounts/:id` âœ…
  - Include user info âœ…
  - Validasi kepemilikan âœ…
- [x] **Update account**: âœ…
  - Endpoint: `PATCH /accounts/:id` âœ…
  - Update account type âœ…
  - Validasi kepemilikan âœ…
- [x] **Delete account**: âœ…
  - Endpoint: `DELETE /accounts/:id` âœ…
  - Validasi balance = 0 âœ…
  - Validasi kepemilikan âœ…
- [x] **Validasi kepemilikan akun**: âœ…
  - User hanya bisa akses akun miliknya âœ…
  - Admin bisa akses semua akun âœ…
  - ForbiddenException jika tidak punya akses âœ…

## 7. Fitur Transaction âœ…

- [x] **Deposit**: âœ…
  - Endpoint: `POST /transactions/deposit` âœ…
  - Increment balance âœ…
  - Create transaction log âœ…
  - Validasi akun milik user âœ…
  - Menggunakan Prisma transaction untuk atomicity âœ…
- [x] **Withdraw**: âœ…
  - Endpoint: `POST /transactions/withdraw` âœ…
  - Decrement balance âœ…
  - Create transaction log âœ…
  - Validasi saldo cukup âœ…
  - Validasi akun milik user âœ…
  - Menggunakan Prisma transaction untuk atomicity âœ…
- [x] **Transfer**: âœ…
  - Endpoint: `POST /transactions/transfer` âœ…
  - Decrement dari akun asal âœ…
  - Increment ke akun tujuan âœ…
  - Create transaction log âœ…
  - Validasi saldo cukup âœ…
  - Validasi akun asal milik user âœ…
  - Validasi akun tujuan valid âœ…
  - Tidak boleh transfer ke akun yang sama âœ…
  - Menggunakan Prisma transaction untuk atomicity âœ…
- [x] **Semua mencatat transaction log**: âœ…
  - Deposit: type DEPOSIT, toAccountId âœ…
  - Withdraw: type WITHDRAW, fromAccountId âœ…
  - Transfer: type TRANSFER, fromAccountId, toAccountId âœ…
- [x] **Validasi**: âœ…
  - [x] Saldo cukup (untuk withdraw & transfer) âœ…
  - [x] Akun tujuan valid âœ…
  - [x] Tidak boleh transfer ke akun yang sama âœ…
  - [x] User hanya bisa akses akun miliknya (kecuali transfer bisa ke akun lain) âœ…
- [x] **Get all transactions**: âœ…
  - Endpoint: `GET /transactions` âœ…
  - User hanya lihat transaksi miliknya âœ…
  - Admin bisa lihat semua transaksi âœ…
- [x] **Get transaction detail**: âœ…
  - Endpoint: `GET /transactions/:id` âœ…
  - Include account details âœ…
  - Validasi kepemilikan âœ…

## 8. Dokumentasi API (Swagger) âœ…

- [x] **Tambahkan Swagger di main.ts**: âœ…
  - SwaggerModule setup âœ…
  - DocumentBuilder dengan title, description, version âœ…
  - Bearer Auth configuration âœ…
- [x] **Verifikasi endpoint muncul di /api**: âœ…
  - Semua endpoint sudah ter-dokumentasi âœ…
  - ApiTags untuk setiap module âœ…
  - ApiOperation untuk setiap endpoint âœ…
  - ApiResponse untuk status codes âœ…
  - ApiBearerAuth untuk protected routes âœ…
- [x] **Swagger accessible**: âœ…
  - URL: `http://localhost:3000/api` âœ…
  - Root path redirect ke `/api` âœ…

## 9. Testing Manual âš ï¸

- [ ] **Register â†’ Login â†’ Ambil token**: âš ï¸ **PERLU TEST MANUAL**
- [ ] **Create account**: âš ï¸ **PERLU TEST MANUAL**
- [ ] **Deposit**: âš ï¸ **PERLU TEST MANUAL**
- [ ] **Withdraw**: âš ï¸ **PERLU TEST MANUAL**
- [ ] **Transfer**: âš ï¸ **PERLU TEST MANUAL**
- [ ] **Cek transaksi di Swagger/DB**: âš ï¸ **PERLU TEST MANUAL**

**Cara Testing:**
1. Buka `http://localhost:3000/api`
2. Test endpoint menggunakan Swagger UI
3. Atau gunakan Postman/Thunder Client
4. Verifikasi data di database (phpMyAdmin atau Prisma Studio)

## 10. Selesai âš ï¸

- [x] **Pastikan semua endpoint jalan**: âœ…
  - Semua endpoint sudah dibuat dan ter-dokumentasi âœ…
  - Server berjalan di `http://localhost:3000` âœ…
- [ ] **Push ke GitHub**: âš ï¸ **PERLU DILAKUKAN**
- [ ] **Deploy (bonus)**: âš ï¸ **OPSIONAL**

---

## ğŸ“Š Summary

### âœ… Sudah Selesai (9/10)
- âœ… Setup Project
- âœ… Setup Prisma
- âœ… Struktur NestJS
- âœ… Fitur Authentication
- âœ… Fitur User
- âœ… Fitur Account
- âœ… Fitur Transaction
- âœ… Dokumentasi API (Swagger)
- âœ… Semua endpoint sudah dibuat

### âš ï¸ Perlu Dilakukan
- âš ï¸ **Testing Manual** - Test semua endpoint menggunakan Swagger UI
- âš ï¸ **Push ke GitHub** - Commit dan push code ke repository
- âš ï¸ **Deploy (bonus)** - Deploy ke production (Render, Railway, Fly.io, dll)

---

## ğŸš€ Langkah Selanjutnya

1. **Testing Manual**:
   ```bash
   # Pastikan server berjalan
   npm run start:dev
   
   # Buka browser
   http://localhost:3000/api
   ```

2. **Push ke GitHub**:
   ```bash
   git add .
   git commit -m "feat: complete RevoBank API implementation"
   git push origin main
   ```

3. **Deploy (Opsional)**:
   - Setup database di cloud (TigerData, Supabase, dll)
   - Deploy backend ke Render/Railway/Fly.io
   - Update environment variables
   - Run migrations: `npm run prisma:migrate deploy`

---

## ğŸ“ Test Credentials (dari seed)

**Admin:**
- Email: `admin@revobank.com`
- Password: `admin123`

**Customer 1:**
- Email: `john.doe@example.com`
- Password: `customer123`

**Customer 2:**
- Email: `jane.smith@example.com`
- Password: `customer123`

---

**Status: 90% Complete** ğŸ‰
**Tinggal testing manual dan push ke GitHub!**

